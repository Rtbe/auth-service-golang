# Auth service golang
## Тестовое задание от компании Medods

**Задача:** Написать сервис аутентификации. Четыре REST маршрута:

- Первый маршрут выдает пару Access, Refresh токенов для пользователя с идентификатором (GUID) указанным в параметре запроса.

- Второй маршрут выполняет Refresh операцию на пару Access, Refresh токенов.

- Третий маршрут удаляет конкретный Refresh токен из базы.

- Четвертый маршрут удаляет все Refresh токены из базы для конкретного пользователя.

**Технологии:**

Язык программирования Go. База данных MongoDB, топология Replica Set, использование транзакций обязательно.

Access токен тип JWT, алгоритм SHA512. Refresh токен тип произвольный, формат передачи base64, хранится в базе исключительно в виде bcrypt хеша, должен быть защищен от изменения на стороне клиента и попыток повторного использования. Access, Refresh токены обоюдно связаны, Refresh операцию для Access токена можно выполнить только тем Refresh токеном который был выдан вместе с ним.

**Результат:** Результат выполнения задания нужно предоставить в виде исходного кода на Github, а также работающего приложения на Heroku.

---

Ссылка на работающее приложение: https://auth-service-golang.herokuapp.com/

Эндпоинты реализованного приложения:

1) Метод: GET, Путь: /auth/user/{id} - Получение пары access/refresh токенов для пользователя. Id пользователя указывается в параметре запроса.

Пример запроса:
```
curl -X GET https://auth-service-golang.herokuapp.com/auth/user/...
```
**Где ... - id пользователя.**

2) Метод: POST, Путь: /auth/tokens/refresh - Осуществление refresh операции по паре access/refresh токенов.

Пример запроса:
```
curl -X POST -d '{"access_token":"...","refresh_token":"..."}' https://auth-service-golang.herokuapp.com/auth/tokens/refresh
```

**Где ... - access и refresh токены.**

3) Метод: DELETE, Путь: /auth/refresh - Удаление конкретного refresh токена из базы данных. Refresh токен передается в теле запроса.

Пример запроса:
```
curl -X DELETE -d '{"refresh_token":"..."}' https://auth-service-golang.herokuapp.com/auth/refresh
```
**Где ... - полученный ранее refresh токен.**

4) Метод: DELETE, Путь: /auth/user/refresh - Удаление всех refresh токенов из базы данных для конкретного пользователя. Id пользователя передается в теле запроса.
Пример запроса:
```
curl -X DELETE -d '{"user_id":"..."}' https://auth-service-golang.herokuapp.com/auth/user/refresh
```
**Где ... - id пользователя.**
